---
name: Code Quality checks with understand

on:
    push:
    pull_request:

jobs:
    build:
        name: Code Quality
        runs-on: ubuntu-latest

        permissions:
            contents: read
            packages: read
            statuses: write # Report results
        
        steps:
            - name: Checkout code
              uses: actions/checkout@v4
            
            - name: install understand
              run: |
                wget -nv latest.scitools.com/Understand/Understand-CLI-6.5.1181-Linux-64bit.tgz
                tar -xvzf Understand-CLI-6.5.1181-Linux-64bit.tgz

            - name: test und
              run: scitools/bin/linux64/und help
            
            - name: test license
              run: echo ${{ secrets.SLACK_LICENSE }}
            
            - name: set license
              env:
                LICENSE: ${{ secrets.SLACK_LICENSE }}
              run: |
                scitools/bin/linux64/und -setlicensecode "$LICENSE"
            
            - name: test
              run: scitools/bin/linux64/und help
                
